<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚³ã‚¸ãƒãƒ‰!! - åç°¿ç®¡ç†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<h1 class="title">ã‚³ã‚¸ãƒãƒ‰!!</h1>

<div class="top-nav">
  <a class="active" href="players.html">åç°¿ç®¡ç†</a>
  <a href="attendance.html">å‚åŠ ãƒã‚§ãƒƒã‚¯</a>
  <a href="index.html">è©¦åˆä½œæˆ</a>
</div>

<div class="panel">
  <h2>åå‰ã‚’è¿½åŠ </h2>

  <input
    id="newPlayer"
    type="text"
    placeholder="åå‰ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šã‚³ã‚¸ã‚³ã‚¸ï¼‰"
    style="width:100%; padding:12px; font-size:16px; border-radius:10px; border:2px solid #ffb3d9;"
  >

  <button class="btn primary" onclick="addPlayer()" style="margin-top:10px;">
    è¿½åŠ ã™ã‚‹
  </button>
</div>

<div class="panel">
  <h2>åç°¿ä¸€è¦§</h2>
  <ul id="playerList" style="list-style:none; padding:0; margin:0;"></ul>
  <p class="muted">â€» ã“ã“ã«ç™»éŒ²ã•ã‚ŒãŸåå‰ãŒå‚åŠ ãƒã‚§ãƒƒã‚¯ã«åæ˜ ã•ã‚Œã¾ã™</p>
</div>

<script src="common.js"></script>

<script>
/* =========================
   åˆæœŸè¡¨ç¤º
========================= */
window.onload = () => {
  loadPlayers();
};

/* =========================
   åç°¿è¡¨ç¤º
========================= */
function loadPlayers() {
  const list = document.getElementById("playerList");
  list.innerHTML = "";

  const players = JSON.parse(localStorage.getItem("allPlayers") || "[]");

  if (players.length === 0) {
    list.innerHTML = `<li class="muted">ã¾ã ç™»éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</li>`;
    return;
  }

  players.forEach((name, index) => {
    const li = document.createElement("li");
    li.style.marginBottom = "10px";

    li.innerHTML = `
      <div class="match-card">
        <div class="teams">
          <div class="team team-a">${name}</div>
          <button
            onclick="deletePlayer(${index})"
            style="background:#ff6675; color:white; border:none; border-radius:10px; padding:6px 12px; font-weight:bold;"
          >
            å‰Šé™¤
          </button>
        </div>
      </div>
    `;
    list.appendChild(li);
  });
}

/* =========================
   è¿½åŠ 
========================= */
function addPlayer() {
  const input = document.getElementById("newPlayer");
  const name = input.value.trim();

  if (!name) {
    alert("åå‰ã‚’å…¥åŠ›ã—ã¦ã­ğŸ’¦");
    return;
  }

  const players = JSON.parse(localStorage.getItem("allPlayers") || "[]");

  if (players.includes(name)) {
    alert("ãã®åå‰ã¯ã‚‚ã†ã‚ã‚‹ã‚ˆï¼");
    return;
  }

  players.push(name);
  localStorage.setItem("allPlayers", JSON.stringify(players));

  input.value = "";
  loadPlayers();
}

/* =========================
   å‰Šé™¤
========================= */
function deletePlayer(index) {
  const players = JSON.parse(localStorage.getItem("allPlayers") || "[]");
  players.splice(index, 1);
  localStorage.setItem("allPlayers", JSON.stringify(players));
  loadPlayers();
}
</script>

</body>
</html>
