<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>名簿管理</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">

<style>
h1 {
  text-align:center;
  font-size:42px;
  font-weight:900;
  color:#ff66b3;
  text-shadow:2px 2px #ffd6eb;
  margin:10px 0 20px;
}

.list-item {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  background:white;
  border:1px solid #ffd3ec;
  border-radius:8px;
  margin-bottom:6px;
}

.list-item span {
  font-size:18px;
}

.list-item button {
  width:70px;
  padding:6px;
  font-size:14px;
}
</style>
</head>

<body>

<h1>名簿管理</h1>

<div class="top-nav">
  <a class="active" href="players.html">名簿管理</a>
  <a href="attendance.html">参加チェック</a>
  <a href="index.html">試合作成</a>
</div>

<div class="setting-block">
  <h2>選手を追加</h2>
  <input id="playerName" placeholder="名前を入力" style="width:100%; padding:12px; font-size:18px;">
  <button id="addBtn">追加</button>
</div>

<div class="setting-block">
  <h2>名簿（ドラッグで並び替え可）</h2>
  <div id="playerList"></div>
</div>

<button id="saveBtn" style="background:#90ee90;">名簿保存</button>

<script>
/* -------------------------
     名簿を読み込んで表示
------------------------- */
function loadPlayers() {
  const list = document.getElementById("playerList");
  list.innerHTML = "";

  const players = JSON.parse(localStorage.getItem("allPlayers") || "[]");

  players.forEach((name, index) => {
    const div = document.createElement("div");
    div.className = "list-item";

    div.innerHTML = `
      <span>${name}</span>
      <button onclick="deletePlayer(${index})">削除</button>
    `;

    list.appendChild(div);
  });
}

/* -------------------------
     削除
------------------------- */
function deletePlayer(i) {
  const players = JSON.parse(localStorage.getItem("allPlayers") || "[]");
  players.splice(i, 1);
  localStorage.setItem("allPlayers", JSON.stringify(players));
  loadPlayers();
}

/* -------------------------
     追加
------------------------- */
document.getElementById("addBtn").onclick = () => {
  const name = document.getElementById("playerName").value.trim();
  if (!name) return alert("名前を入力してください");

  const players = JSON.parse(localStorage.getItem("allPlayers") || "[]");

  if (players.includes(name)) {
    alert("すでに存在しています");
    return;
  }

  players.push(name);
  localStorage.setItem("allPlayers", JSON.stringify(players));

  document.getElementById("playerName").value = "";
  loadPlayers();
};

/* 保存ボタン（形式だけ） */
document.getElementById("saveBtn").onclick = () => {
  alert("保存しました！");
};

/* -------------------------
     初期ロード
------------------------- */
window.onload = () => {
  loadPlayers();
};
</script>

</body>
</html>
